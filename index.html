<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<title>tunnle.js examples</title>

<script src="lib/stlviewer/three.js"></script>
<script src="lib/stlviewer/STLLoader.js"></script>
<script src="lib/stlviewer/OrbitControls.js"></script>

<script src="src/simplestl.js"></script>
<script src="src/simplelinearalgebra.js"></script>
<script src="src/tunnle.js"></script>
<script src="src/simple3dloader.js"></script>

</head>

<body>
    <script>
        setTimeout(function () {
            function createExampleHTML(tunnle, title, description, canvas) {
                var loader = new simple3dloader();
                loader.init();
                loader.setMesh(tunnle);
 
                var exampleOuter = document.createElement("div");
                exampleOuter.style.float = "left";
                exampleOuter.style.width="500px";
                exampleOuter.style.height="650px";
                exampleOuter.style.margin="10px";

                var exampleTitle = document.createElement("h3");
                exampleTitle.innerHTML = title;

                var exampleDescription = document.createElement("div");
                exampleDescription.innerHTML = description;

                var downloadButton = document.createElement('a');
                downloadButton.setAttribute('href', 'data:application/octet-stream;charset=utf-8,' + encodeURIComponent(tunnle));
                downloadButton.setAttribute('download', title+".stl");
                downloadButton.innerHTML = title+" (STL)";

                exampleOuter.appendChild(exampleTitle);
                exampleOuter.appendChild(loader.getCanvas());
                exampleOuter.appendChild(exampleDescription);
                exampleOuter.appendChild(downloadButton);


                document.body.appendChild(exampleOuter);
            }


            var surfaceWallFunction = function ( radius, height, horizontalSteps, verticalSteps) {
                return function (i, h) {
                    var x = ((0.9+0.05*Math.sin((8*Math.PI*h/100)))*90 + (((h%5)==0||(i%5)==0)?5:0))*Math.cos(2*Math.PI/(horizontalSteps-1)*(i));
                    var y = h*2;
                    var z = ((0.9+0.05*Math.sin((8*Math.PI*h/100)))*90 + (((h%5)==0||(i%5)==0)?5:0))*Math.sin(2*Math.PI/(verticalSteps-1)*(i));
                    return {x,y,z};
                }
            };


            var surfaceWallFunction2 = function ( radius, height, horizontalSteps, verticalSteps) {
                return function (i, h) {
                    var x = (100 - (((h%5)==0||(i%5)==0)?5:0))*Math.cos(2*Math.PI/(horizontalSteps-1)*i);
                    var y = h*2;
                    var z = (100 - (((h%5)==0||(i%5)==0)?5:0))*Math.sin(2*Math.PI/(verticalSteps-1)*i);
                    return {x,y,z};
                }
            };

            
            createExampleHTML(
                tunnlejs.createFlatTunnle(200,30,0.1,15,3),
                "Flat tunnle",
                "This tunnle has a wallthickness of 10% and 15 side segments and 3 height segments"
            )

            createExampleHTML(
                tunnlejs.createFlatTunnle(200,30,0.1,4,3),
                "Box tunnle",
                "This tunnle is shaped like a box"
            )

            createExampleHTML(
                tunnlejs.createFlatTunnle(100,50,1,4,3),
                "Box",
                "This tunnle is a box"
            )

            createExampleHTML(
                tunnlejs.createTunnleByOuterSurface([1,0.7,1,0.7,1,0.7,1,0.7,1,0.7,1,0.7,1,0.7,1,0.7],200,30,0.1,15),
                "Alternating surface",
                "This tunnle has an alternating inner and outer surface"
            )

            createExampleHTML(
                tunnlejs.createTunnleByInnerAndOuterSurface([2,2,0.5,0.5,0.5,0.5,0.5,0.5,2,2],[0,2,0.5,0.5,0.5,0.5,0.5,0.5,2,0],200,30,0.1,15),
                "Dumbbell",
                "This tunnle has the Form of a dumbbell"
            )

            createExampleHTML(
                tunnlejs.createTunnleByInnerAndOuterSurface([1.7,1.9,2,2,2,2,2,2,2],[0,0,1,2,2,2,2,2,2.1],200,30,0.1,15),
                "Cup",
                "This+30*Math.sin(5*h/100) tunnle has the Form of a cup"
            )
            
            var ar1 =[1,1,1,1,1,1,1,1.5,1.1,1,1,0.7,0.7,0.7,0.7,1.2,0.7,0.5,0.4,0.4,0.4,0.4,0.7,0.4,0.4,0.4,0.3,0.2,0.2,0.5,0.1,0];
            var ar2 =[1,1,1,1,1,1,1,1.5,1.1,1,1,0.7,0.7,0.7,0.7,1.2,0.7,0.5,0.4,0.4,0.4,0.4,0.7,0.4,0.4,0.4,0.3,0.2,0.2,0.5,0.1,0];
            createExampleHTML(
                tunnlejs.createTunnleByInnerAndOuterSurface(
                    ar1,
                    ar2,180,50,0.3,4),
                "Asian Tower",
                "This tunnle has the Form of a tower"
            )



            var innerWallFunction = surfaceWallFunction(100,100,100,100)
            var outerWallFunction = surfaceWallFunction2(100,100,100,100)


            createExampleHTML(
                tunnlejs.createTunnleByWallFunctions(innerWallFunction, outerWallFunction,100,100),
                "Function generated tunnle",
                "This tunnle is generated with one inner and one outerwall function"
            )

        },100);
    </script>
</body>

</html>